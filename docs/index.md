---
page_title: "Digital Rebar (drp) Provider"
description: |-
  Provider Information
subcategory: "Infrastructure"
---
# Digital Rebar (drp) Provider

The Digital Rebar provider makes controlling Bare Metal simple, powerful and cloud-like.

Manage physical servers, bare metal, virtual machines and cloud infrastructure via Terraform machines by leveraging Digital Rebar Machine Pools and Infrastructure PIpelines. These features provide powerful operational governance and transparency behind the scenes for infrastructure teams while keeping the Terraform "give me a machine" experience simple and cloud-like for development teams.

Digital Rebar is a self-contained user-managed software platform: no external networking or cloud service is required. Further information about installing, licenses and operation of Digital Rebar can be found on the RackN websites: https://RackN.com/rebar.

## Prerequisites & Usage

You _must_ install Digital Rebar before using this provider. See https://portal.rackn.io for instructions.

Integration documentation: https://docs.rackn.io/en/latest/doc/integrations/terraform.html

Note: once installed, export `RS_KEY` environmental variable to define the "user:password" credentials (recommended over including the the plan provider stanza)

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `endpoint` (String) The DRP server URL. ie: https://1.2.3.4:8092

### Optional

- `key` (String) The DRP user:password key
- `password` (String) The DRP password
- `token` (String) Granted DRP token (use instead of RS_KEY)
- `username` (String) The DRP user

## Provider Example

```terraform
provider "drp" {
  username = "rocketskates"
  password = "r0cketsk8ts"
  endpoint = "https://192.168.1.93:8092"
  # token  = will read from RS_TOKEN if set
  # key    = will read from RS_KEY if set
}
```

## Example of Complete tf File

```terraform
# RackN 2020
# Digital Rebar v4.4+ Terraform v0.13+ Provider

terraform {
  required_version = ">= 0.13.0"
  required_providers {
    drp = {
      version = "2.0.0"
      source  = "extras.rackn.io/rackn/drp"
    }
  }
}

provider "drp" {
  username = "rocketskates"
  password = "r0cketsk8ts"
  endpoint = "https://192.168.1.93:8092"
  # token  = will read from RS_TOKEN if set
  # key    = will read from RS_KEY if set
}

resource "drp_machine" "one_random_node" {

  # Required values
  # there are none!

  # Settable values
  # pool = name of an existing DRP pool (defaults to "default")
  # allocate_workflow = Name of workflow to set when a machine is allocated from the pool
  # if none is set the default pool/workflow defined by the drp admin will be used
  # deallocate_workflow = Name of workflow to set when the machine is released back to the pool
  # setting this overrides the defaults defined by the DRP admin
  # timeout = time string for max wait time (default to 5m)
  # 
  # List of public SSH keys to be installed (written as Param.access-keys)
  # authorized_keys = ["ssh key"]
  # 
  # List of profiles to apply to node (must already exist)
  # add_profiles = ["mandy", "clause"]
  #
  # list of parameters to set with their string value forms
  # add_parameters = ["param1: value1", "param2: value2"]
  #
  # Use filters to hone your machine to a specific set of criteria, or exclude them based on criteria
  # follows the Digital Rebar CLI command line pattern
  # This example looks for a machine named esxi-7-testing.example.local where the "Address" field on the
  # DRP Machine object is not empty/blank
  # filters = ["Name=esxi-7-testing.example.local", "Address=Ne()"]
  # This example excludes machines that do not have an Address
  # filters = ["Address=Ne()"]
  # Returned values
  # name = machine name
  # address = machine address
  # status = machine status (typically "InUse")
  # If your machine does not have an Address it will report the "address" as nil/null
}

output "machine_ip" {
  value       = drp_machine.one_random_node.address
  description = "Machine.Address (the Machine's primary IP)"
}

output "machine_id" {
  value       = drp_machine.one_random_node.id
  description = "Machine.Uuid"
}

output "machine_name" {
  value       = drp_machine.one_random_node.name
  description = "Machine.Name"
}

output "machine_status" {
  value       = drp_machine.one_random_node.status
  description = "Machine.PoolStatus"
}
```

